# 敏捷拓展

- DSL：Domain-Specific Language 特定领域的语言结构，例如 SQL，Regex 正则表达式。
- eDSL：embedded DSL 使用宿主语言创建的 DSL，是宿主语言的一部分，是天然合法的仓颉程序，可以理解为嵌入宿主语言的 DSL。被广泛应用于 UI 布局，数据库访问，编译脚本等场景。仓颉为构建 eDSL 提供了丰富的语言拓展能力。

### 原生语法扩展能力

- 类型拓展：不修改原有类型代码，并为它添加新功能。
- 属性：隐式调用成员变量的 getter,setter
- 命名参数和参数默认值：调用函数时可以按命给形参赋值，无关参数之间的顺序，对于使用默认值的形参，在调用时无需传入。
- 操作符重载：给非数值类型的对象，提供算术运算符的语法。
- 尾随 Lambda：调用函数时，如果最后一个形式是函数类型，可以使用尾随 Lambda 的语法糖，如果这个函数没有形参，还可以省略 =>
- 关键字省略：eDSL 的语法噪音由宿主语言引入，仓颉支持构造对象省略 new，行尾省略分号，省略 return，进一步简化 eDSL 表达

### 宏

宏在编译时对代码进行转换，即编译时的元编程，“元”通常代指本身，即代码的代码。仓颉目前支持过程宏，未来将支持 late-stage 宏和模板宏。
过程宏即利用最表面的词法序列（不包括语义信息，例如类型推断）对代码进行处理，late-stage 宏在编译较晚期进行展开，可以获得更多的语义信息，例如推断之后的类型，模板宏就像语法糖，将代码替换为指定的模板。

### 敏捷拓展案例：声明式 UI

业界开始采用 eDSL 的方式来构建声明式 UI 框架。声明式 UI，所见即所得，通过 eDSL 反应层级和布局。例如通过尾随 Lambda 来反映层级，通过宏定义结合属性，进行状态绑定。

[上一篇： 轻量化运行时](./6-lightweight-runtime.md)

[下一篇： 工具支持](./8-util-support.md)
